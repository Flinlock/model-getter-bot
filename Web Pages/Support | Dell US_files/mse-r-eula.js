function mse_DSDScanCallback(e,a){console.log("DSD Callback: ",a)}function HandleDSDDownloadForApp(){return eulaOmnitureAgree(),eulaHelper.downloadAndScanSystem(!0),!1}function HandleDSDReturnForApp(){return eulaOmnitureNoAgree(),eulaHelper.GetRedirectToPreviousPage(),!1}function eulaeventBinders(e){$("#btnClose").bind("click",function(){return 1==eulaDisplayed&&eulaHelper.handleOldUserSelection(),$("#NotificationModal").modal("hide"),icon_ui_loading("detectmyproduct_homepage"),!1}),$("#btnOld").bind("click",function(){return(1==eulaDisplayed||"MSEHome"==e)&&eulaHelper.handleOldUserSelection(),$("#NotificationModal").modal("hide"),icon_ui_loading("detectmyproduct_homepage"),!1}),$("#btnNew").bind("click",function(){return eulaHelper.handleNewUserSelection(),$("#NotificationModal").hide(),$("#NotificationModal").modal("hide"),!1}),$("#NotificationModal").on("hide.bs.modal",function(e){var a=e.currentTarget.ownerDocument.activeElement.id;prop20ModalPopClose(a)})}function EulaScanAngular(e,a,n){angular.module("eulaModule",["ngSanitize"]).controller("eulaCtrl",["$scope","$timeout",function(s,r){s.eulaMode="DSDCheck",s.progressBarCssClass={completed:"bar bar-disabled",progress:"bar bar-progress-disabled",incomplete:"bar bar-incomplete"},s.eulaProgressBar=[{status:s.progressBarCssClass.incomplete,text:e,width:"34%"},{status:s.progressBarCssClass.incomplete,text:a,width:"33%"},{status:s.progressBarCssClass.incomplete,text:n,width:"33%"}],EAValue=EAValue.toLowerCase();var l="";s.detectDSD=function(){"use strict";globalEsc.findService(function(){window.isDsdInstalled=!0;var e="supportassist-exists",a=JSON.parse(window.sessionStorage.getItem("clientVersion"));null!=a&&(e+="|saversion-"+a),"undefined"!=typeof suppAssistEnabled&&1==suppAssistEnabled&&dellmetricsTrack_prop20_format("900.111.011",e),s.updateEulaMode("DSDDownloadRunning"),eulaHelper.clientScanHandler(!1)},function(){window.isDsdInstalled=!1,"undefined"!=typeof suppAssistEnabled&&1==suppAssistEnabled&&dellmetricsTrack_prop20_format("900.111.012","supportassist-not-exists"),l?s.HandleDSDDownloadForApp(!0):s.updateEulaMode("DSDAcceptAgreement")},DSDtimerToEnable)},s.updateEulaMode=function(e){s.eulaMode=e,s.updateProgressStatus(),s.$$phase||s.$apply()},s.updateProgressStatus=function(){switch((void 0==suppAssistEnabled||"undefined"==suppAssistEnabled||null==suppAssistEnabled||""==suppAssistEnabled)&&(suppAssistEnabled=!1),s.eulaMode){case"DSDCheck":s.eulaProgressBar[0].status=s.progressBarCssClass.progress;break;case"DSDAcceptAgreement":1==suppAssistEnabled&&dellmetricsTrack_prop20_format("900.111.002","eula-supportassist"),s.eulaProgressBar[0].status=s.progressBarCssClass.progress;break;case"DSDDownloadInstall":case"DSDDownloadError":s.eulaProgressBar[0].status=s.progressBarCssClass.completed,s.eulaProgressBar[1].status=s.progressBarCssClass.progress;break;case"DSDDownloadRunning":s.eulaProgressBar[2].status=s.progressBarCssClass.progress,s.eulaProgressBar[0].status=s.progressBarCssClass.completed,s.eulaProgressBar[1].status=s.progressBarCssClass.completed,(void 0==suppAssistEnabled||"undefined"==suppAssistEnabled||null==suppAssistEnabled||""==suppAssistEnabled)&&(suppAssistEnabled=!1),1==suppAssistEnabled&&dellmetricsTrack_prop20_format("900.111.005","autodetectstart")}},s.DSDAlertHideShow=function(){return!1},s.HandleDSDDownloadForApp=function(e){return e||angular.element("#dsdEulaAgree:checked").length>0?(globalEsc.pollService(function(){"undefined"!=typeof suppAssistEnabled&&1==suppAssistEnabled&&dellmetricsTrack_prop20_format("900.111.003","supportassist-response-received"),s.updateEulaMode("DSDDownloadRunning"),eulaHelper.clientScanHandler(!1)},function(e){"undefined"!=typeof suppAssistEnabled&&1==suppAssistEnabled&&dellmetricsTrack_prop20_format("900.111.004","supportassist-response-not-received"),eulaHelper.handleErrorTagScan(e,!0)}),s.isHttpsFireFoxAlertMsg=s.DSDAlertHideShow(),s.updateEulaMode("DSDDownloadInstall"),setTimeout(function(){globalEsc.ShowDSDInstallationSteps&&globalEsc.ShowDSDInstallationSteps()},200),HandleDSDDownloadForApp()):!1},DSDDownloadError.length>0&&"true"==DSDDownloadError?s.HandleDSDDownloadForApp(!0):(s.detectDSD(),s.updateProgressStatus())}]),angular.bootstrap($("#eulaHeadingDiv").get(0),["eulaModule"])}function installDsd(){var e=angular.element("#eulaagree").scope();return e.HandleDSDDownloadForApp(),setTimeout(function(){e.$apply()},0),!1}function EulaErrorModelAngular(acceptTerm,downloadInstall,RunningDell){angular.module("eulaModule",["ngSanitize"]).controller("eulaCtrl",["$scope",function($scope){$scope.eulaMode="DSDDownloadError",$scope.progressBarCssClass={completed:"bar bar-disabled",progress:"bar bar-progress-disabled",incomplete:"bar bar-incomplete"},$scope.eulaProgressBar=[{status:$scope.progressBarCssClass.completed,text:acceptTerm,width:"34%"},{status:$scope.progressBarCssClass.progress,text:downloadInstall,width:"33%"},{status:$scope.progressBarCssClass.incomplete,text:RunningDell,width:"33%"}],$scope.detectDSD=function(){"use strict";globalEsc.findService(function(){window.isDsdInstalled=!0},function(){window.isDsdInstalled=!1})},$scope.DSDAlertHideShow=function(){return 1==$.isHttpsRequest()&&(!windowsOSValidationHelper.isHttpsFireFoxBrowser()||windowsOSValidationHelper.isHttpsFireFoxBrowser()&&eval($.getBrowserDetails().version+ffVersion))},$scope.isHttpsFireFoxAlertMsg=$scope.DSDAlertHideShow(),$scope.updateProgressStatus=function(){switch($scope.eulaMode){case"DSDDownloadError":$scope.eulaProgressBar[0].status=$scope.progressBarCssClass.completed,$scope.eulaProgressBar[1].status=$scope.progressBarCssClass.progress,$scope.eulaProgressBar[2].status=$scope.progressBarCssClass.incomplete;break;case"DSDRunningError":$scope.eulaProgressBar[2].status=$scope.progressBarCssClass.progress,$scope.eulaProgressBar[0].status=$scope.progressBarCssClass.completed,$scope.eulaProgressBar[1].status=$scope.progressBarCssClass.completed}},$scope.detectDSD(),void 0!=DSDDownloadError&&DSDDownloadError.length>0?$scope.eulaMode="DSDDownloadError":$scope.eulaMode="DSDRunningError",$scope.updateProgressStatus()}]),angular.bootstrap($("#eulaHeadingDiv").get(0),["eulaModule"])}function createDelegate(e){return function(){return e.apply()}}function delegateEulaCallbacks(e,a){eulaContinue=createDelegate(e),eulaCancel=createDelegate(a)}function defaultCallback(){console.log("Eula Component callbacks not delegated")}function AgreecheckboxChecked(){return 1==$("#dsdEulaAgree").prop("checked")?($("#eulaagree").removeClass("disabled"),eulaCheckboxChecked()):$("#eulaagree").addClass("disabled"),!1}function prop20ModalPopClose(e){if("undefined"!=typeof globalAppName)if("btnOld"==e){if("configuration"==globalAppName)return dellmetricsTrack_prop20_format("500.100.010",""),!1}else{if("btnNew"==e)return"configuration"==globalAppName&&dellmetricsTrack_prop20_format("500.100.009","sysanalysis_view_results"),!1;if("btnClose"!=e)return"configuration"==globalAppName&&dellmetricsTrack_prop20_format("500.100.011",""),!1;if("configuration"==globalAppName)return dellmetricsTrack_prop20_format("500.100.008",""),!1}}function eulaOmnitureAgree(){var originalAppName=appName;if("undefined"!=originalAppName){if(originalAppName="modal"==originalAppName?"mse":appName,"undefined"!=appReturnUrl&&"mse"==originalAppName&&-1!=appReturnUrl.indexOf("incidents-online")&&(originalAppName="incidents"),-1!=originalAppName.indexOf("incidents-online"))incidents_online_eulaOmnitureAgree();else if(-1!=originalAppName.indexOf("incidents"))incidents_eulaOmnitureAgree();else if("undefined"!==eval("typeof "+originalAppName+"_eulaOmnitureAgree")){var callBackFun=eval(originalAppName+"_eulaOmnitureAgree");callBackFun(originalAppName,appIntent)}}else console.log("EULA cancel button appname is null")}function mse_eulaOmnitureAgree(e,a){(void 0==suppAssistEnabled||"undefined"==suppAssistEnabled||null==suppAssistEnabled||""==suppAssistEnabled)&&(suppAssistEnabled=!1),0==suppAssistEnabled&&dellmetricsTrack_prop20_format("900.105.123","home_eulagree")}function drivers_eulaOmnitureAgree(e,a){dellmetricsTrack_prop20_format("100.102.005","cpsdriver_eulagree")}function incidents_online_eulaOmnitureAgree(){dellmetricsTrack_prop20_format("200.100.013","ode-eulaagree")}function incidents_eulaOmnitureAgree(){dellmetricsTrack_prop20_format("890.000.123","ode-eulaagree")}function eulaOmnitureNoAgree(){var originalAppName=appName;if("undefined"!=originalAppName){if(originalAppName="modal"==originalAppName?"mse":appName,"undefined"!=appReturnUrl&&"mse"==originalAppName&&-1!=appReturnUrl.indexOf("incidents-online")&&(originalAppName="incidents"),-1!=originalAppName.indexOf("incidents-online"))incidents_online_eulaOmnitureNoAgree();else if(-1!=originalAppName.indexOf("incidents"))incidents_eulaOmnitureNoAgree();else if("undefined"!==eval("typeof "+originalAppName+"_eulaOmnitureNoAgree")){var callBackFun=eval(originalAppName+"_eulaOmnitureNoAgree");callBackFun(originalAppName,appIntent)}}else console.log("EULA cancel button appname is null")}function mse_eulaOmnitureNoAgree(e,a){(void 0==suppAssistEnabled||"undefined"==suppAssistEnabled||null==suppAssistEnabled||""==suppAssistEnabled)&&(suppAssistEnabled=!1),0==suppAssistEnabled&&dellmetricsTrack_prop20_format("900.105.321","home_eulanoagree")}function drivers_eulaOmnitureNoAgree(e,a){dellmetricsTrack_prop20_format("100.102.006","cpsdriver_eulanoagree")}function incidents_online_eulaOmnitureNoAgree(){dellmetricsTrack_prop20_format("200.100.014","ode-eulanoagree")}function incidents_eulaOmnitureNoAgree(){dellmetricsTrack_prop20_format("890.000.321","ode-eulanoagree")}function eulaCheckboxChecked(){var originalAppName="";if(originalAppName="undefined"!=typeof appName&&null!=appName&&""!=appName?appName:"mse","undefined"!=originalAppName)if(originalAppName="modal"==originalAppName?"mse":originalAppName,"undefined"!==eval("typeof "+originalAppName+"_eulaCheckboxChecked")){var callBackFun=eval(originalAppName+"_eulaCheckboxChecked");callBackFun()}else dellmetricsTrack_prop20_format("900.111.013","eula-checkbox-Checked-supportassist");else console.log("eulaCheckboxChecked appname is null")}var currentScannedData=null,eulaHelper=function($){function handleErrorFindService(e){var a=window.location.search.substring(1);return SecureRedirect(slaURL+"?sourcePage="+a.split("=")[1]),!1}function handleSuccessfulTagScan(e){window.isDsdInstalled=!0,currentScannedData=e;var a=e.serviceTagData.serviceTag,n=$("input[name=serviceTag]");n.val(a),window.sessionStorage.setItem("dTag",a);var s="";"C"==scanType.toUpperCase()||"TMC"==scanType.toUpperCase()?s=null!=e.systemInformation?e.systemInformation.computerSystem.model:null!=e.currentSystemConfiguration?e.currentSystemConfiguration.computerSystem.model:e.systemInformation.computerSystem.model:"W"!=scanType.toUpperCase()&&(s=e.systemInformation.computerSystem.model);var r="False";null!=Dell.MySupport.Selection&&(r=Dell.MySupport.Selection.isTag,productCode=Dell.MySupport.Selection.productCode,currentTag=Dell.MySupport.Selection.selection),"incidents"!=appName&&""!=Dell.MySupport.Selection.selection&&("True"==r&&e.serviceTagData.serviceTag.toUpperCase()!=currentTag.toUpperCase()&&""!=$("#modalBody")[0].innerHTML||"False"==r&&Dell.MySupport.Selection.productName.toUpperCase()!=s.toUpperCase()&&""!=$("#modalBody")[0].innerHTML)?($("#modalBody")[0].innerHTML=$("#modalBody")[0].innerHTML.replace("{0}",e.serviceTagData.serviceTag),$("#modalBody")[0].innerHTML=$("#modalBody")[0].innerHTML.replace("{1}",s),$("#modalBody")[0].innerHTML=$("#modalBody")[0].innerHTML.replace("{2}",Dell.MySupport.Selection.productName),"True"==Dell.MySupport.Selection.isTag&&($("#modalBody")[0].innerHTML=$("#modalBody")[0].innerHTML.replace("{3}",currentTag)),0==window.isDsdInstalled?$("#scanprogDivNormal").hide():($("#scanHProcessing").css("display","none"),"TMC"==scanType.toUpperCase()&&$("#scanPSHProcessing").css("display","none"),"C"==scanType.toUpperCase()&&($("#scanPSAProcessing").css("display","none"),$("#scanPSACProcessing").css("display","none"),$("#scanPSHOProcessing").css("display","none")),"M"==scanType.toUpperCase()&&$("#scanPSH1Processing").css("display","none")),$("#NotificationModal").modal("show"),$("#NotificationModal").data("metrics",{appcode:"700.100.001"})):eulaScanHelper.continueUsingScannedData(e)}function insertDsdInfoIntoMsedb(e,a,n,s,r,l){return $.ajax({type:"POST",async:!1,url:insertDsdDbUrl,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({serviceTag:e,modelData:a,configData:n,scanType:s,appName:l}),success:function(e){(void 0==suppAssistEnabled||"undefined"==suppAssistEnabled||null==suppAssistEnabled||""==suppAssistEnabled)&&(suppAssistEnabled=!1);var a="autodetectcomplete",n=JSON.parse(window.sessionStorage.getItem("clientVersion"));null!=n&&(a+="|saversion-"+n),1==suppAssistEnabled&&dellmetricsTrack_prop20_format("900.111.006",a),"incidents"===appName.toLowerCase()&&(window.serviceTagEncrypted=e.tag)},error:function(e,a,n){console.log(e.responseText),icon_ui_loading("detectmyproduct_homepage")}}),!1}function ShowEULA(){$("#productSelectorEulaModal").show(),0==window.isDsdInstalled?$("#scanprogDivNormal").hide():($("#scanHProcessing").css("display","none"),"TMC"==scanType.toUpperCase()&&$("#scanPSHProcessing").css("display","none"),("C"==scanType.toUpperCase()||"TMC"==scanType.toUpperCase())&&($("#scanPSAProcessing").css("display","none"),$("#scanPSACProcessing").css("display","none"),$("#scanPSHOProcessing").css("display","none")),"M"==scanType.toUpperCase()&&$("#scanPSH1Processing").css("display","none")),$("#downloadProgressDiv").hide(),$("#ErrorContainer").hide()}var eulaScanHelper={};return eulaScanHelper.handleNewUserSelection=function(){eulaScanHelper.continueUsingScannedData(currentScannedData)},eulaScanHelper.handleOldUserSelection=function(){return eulaScanHelper.cancelUrl(""),!1},eulaScanHelper.continueUsingScannedData=function(e){window.isDsdInstalled=!0,"undefined"!=typeof updateEsupIdCookieUrl&&UpdateEsupIdCookie(updateEsupIdCookieUrl,e.serviceTagData.serviceTag,currentScannedData.OSCode,"Y");var a="";"incidents"===appName.toLowerCase()&&(a="incidents"),insertDsdInfoIntoMsedb(e.serviceTagData.serviceTag,e.systemInformation,e.currentSystemConfiguration,scanType,currentScannedData.OSCode,a),"incidents"===appName.toLowerCase()?eulaScanHelper.returnUrl(e,window.serviceTagEncrypted):eulaScanHelper.returnUrl(e,e.serviceTagData.serviceTag)},eulaScanHelper.handleErrorTagScanInternal=function(){return $("#productSelectorEulaModal").hide(),0==window.isDsdInstalled?$("#scanprogDivNormal").hide():($("#scanHProcessing").css("display","none"),"TMC"==scanType.toUpperCase()&&$("#scanPSHProcessing").css("display","none"),"C"==scanType.toUpperCase()&&($("#scanPSAProcessing").css("display","none"),$("#scanPSACProcessing").css("display","none"),$("#scanPSHOProcessing").css("display","none")),"M"==scanType.toUpperCase()&&$("#scanPSH1Processing").css("display","none")),$("#downloadProgressDiv").hide(),$("#ErrorContainer").show(),!1},eulaScanHelper.handleErrorTagScan=function(e,a){eulaDisplayed=!0,SecureRedirect(ScanErrorPageUrl+"?scanType="+scanType+"&showRetry=Y&errorcode="+e.errorCode+(1==a?"&isDownloadError=true":"")+"&appName="+appName+"&cancelUrl="+appCancelUrl+"&returnUrl="+appReturnUrl)},eulaScanHelper.downloadAndScanSystem=function(e){eulaDisplayed=!0,eulaScanHelper.SetScanProperties(null,scanType,null,appName),e&&window.open(globalEsc.clientDownloadLocation)},eulaScanHelper.clientScanHandler=function(e){0==window.isDsdInstalled?$("#scanprogDivNormal").show():($("#scanHProcessing").removeClass("hidden"),"TMC"==scanType.toUpperCase()&&$("#scanPSHProcessing").css("display","inline-block"),"C"==scanType.toUpperCase()&&($("#scanPSAProcessing").css("display","inline-block"),$("#scanPSACProcessing").css("display","inline-block"),$("#scanPSHOProcessing").css("display","inline-block")),"M"==scanType.toUpperCase()&&$("#scanPSH1Processing").css("display","inline-block")),$("#downloadProgressDiv").hide();var a,n,s=!0;a="C"==scanType.toUpperCase()||"W"==scanType.toUpperCase()?!1:!0,n="M"==scanType.toUpperCase()||"W"==scanType.toUpperCase()?!1:!0,globalEsc.getClientSystemInfo(s,a,n,function(e){handleSuccessfulTagScan(e.data)},function(e){eulaScanHelper.handleErrorTagScan(e),icon_ui_loading("detectmyproduct_homepage")})},eulaScanHelper.LoadEulaScanner=function(e,a){eulaDisplayed=!0;var n=e;return n+="?scanType="+a+("undefined"!=typeof DSDDownloadError&&DSDDownloadError.length>0?"&isDownloadError=true":""),n+="&appName="+appName+"&cancelUrl="+appCancelUrl+"&returnUrl="+appReturnUrl,n+="&intent="+appIntent,SecureRedirect(n),!1},eulaScanHelper.GetRedirectToPreviousPage=function(){return eulaScanHelper.cancelUrl(""),!1},eulaScanHelper.SetScanProperties=function(e,a,n,s){""==a||void 0==a?scanType="S":scanType=a,""==appName&&(appName=s)},eulaScanHelper.CallDSD=function(){1==window.isDsdInstalled?eulaScanHelper.clientScanHandler(!0):eulaScanHelper.LoadEulaScanner(eulaURL,scanType)},eulaScanHelper.scanEulaClick=function(e){icon_ui_loading("detectmyproduct_homepage");var a="supportassist-exists",n=JSON.parse(window.sessionStorage.getItem("clientVersion"));return null!=n&&(a+="|saversion-"+n),0==window.isDsdInstalled?globalEsc.findService(function(){window.isDsdInstalled=!0,"undefined"!=typeof suppAssistEnabled&&1==suppAssistEnabled&&dellmetricsTrack_prop20_format("900.111.011",a),eulaScanHelper.scanEulaClickHandler()},function(){window.isDsdInstalled=!1,eulaScanHelper.scanEulaClickHandler()}):("undefined"!=typeof suppAssistEnabled&&1==suppAssistEnabled&&dellmetricsTrack_prop20_format("900.111.011",a),eulaScanHelper.scanEulaClickHandler()),!1},eulaScanHelper.scanEulaClickHandler=function(){return void 0!=CookieST&&null!=CookieST&&""!=CookieST?"incidents"===appName?eulaScanHelper.returnUrl(null,EncryptedActiveServiceTag):eulaScanHelper.returnUrl(null,CookieST):eulaScanHelper.CallDSD(),!1},eulaScanHelper.returnUrl=function(data,serviceTag){var callBackFun;if("undefined"!=typeof window.integratedSite){if("undefined"!==eval("typeof "+appName+"_DSDScanCallback")){callBackFun=eval(appName+"_DSDScanCallback");var infoData={appName:window.appName,appReturnUrl:window.appReturnUrl,appCancelUrl:window.appCancelUrl,appIntent:window.appIntent},returnObj=callBackFun.call(this,void 0!=data?data:serviceTag,infoData);if(void 0!=returnObj&&returnObj===!1)return icon_ui_loading("detectmyproduct_homepage"),!1}null!=appReturnUrl?(serviceTagURL=appReturnUrl+"/"+serviceTag,"mse"!==appName&&"modal"!==appName&&"mobile"!==appName&&"incidents"!==appName&&"integratedproductsupport"!==appName&&(serviceTagURL+="/"+appName),"integratedproductsupport"==appName?SecureRedirect(serviceTagURL):SecureRedirect(serviceTagURL+"?IsDetected=Y")):icon_ui_loading("detectmyproduct_homepage")}else void 0===appReturnUrl||0==appReturnUrl.length?(callBackFun=eval(appName+"_DSDScanCallback"),callBackFun.call(this,void 0!=data?data:serviceTag)):(serviceTagURL=appReturnUrl+"/"+serviceTag,"mse"!==appName&&"modal"!==appName&&"mobile"!==appName&"incidents"!==appName&&(serviceTagURL+="/"+appName),SecureRedirect(serviceTagURL+"?IsDetected=Y"))},eulaScanHelper.cancelUrl=function(e){void 0!==e&&""!==e?serviceTagURL=appCancelUrl+"/"+e:serviceTagURL=appCancelUrl,SecureRedirect(serviceTagURL)},eulaScanHelper}(jQuery),eulaCancel,eulaContinue;delegateEulaCallbacks(defaultCallback,defaultCallback),windowsOSValidationHelper.enableDetectMyProduct()||$("#dsdEulaAgree").attr("disabled","disabled").prop("onclick",null);
//# sourceMappingURL=mse-r-eula.js.map